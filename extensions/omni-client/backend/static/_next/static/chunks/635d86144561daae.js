/*---------------------------------------------------------------------------------------------
 *  Copyright (c) 2026 Mohammed Nihan (Nihan Nihu). All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27234,t=>{"use strict";let e={status:"idle",intent:null,execution:null,insights:[],explanations:[],lastUpdated:0};class s{state={...e};listeners=new Set;debounceTimer=null;debounceMs=80;getState(){return this.state}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notify(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.listeners.forEach(t=>t(this.state))},this.debounceMs)}pushIntent(t,e,s){this.state={...this.state,status:"planning",intent:{label:t,confidence:e,explanation:s,timestamp:Date.now()},lastUpdated:Date.now()},this.notify()}pushDagUpdate(t){if(!t||!t.nodes)return;let e=t.nodes||[],s=e.filter(t=>"COMPLETED"===t.status).length,i=e.length,n=!e.every(t=>"COMPLETED"===t.status||"FAILED"===t.status);this.state={...this.state,status:n?"executing":"idle",execution:{graphName:t.graph_id||"DAG",completedNodes:s,totalNodes:i,currentNode:t.current_node||"",progress:"number"==typeof t.progress?t.progress:i>0?s/i:0,isActive:n,templateContext:t.template_context},lastUpdated:Date.now()},n||setTimeout(()=>{this.state={...this.state,execution:null,status:"idle"},this.notify()},3e3),this.notify()}pushInsights(t){let e=t.slice(0,5).map(t=>({id:t.id,title:t.title,severity:t.severity||"low",timestamp:1e3*t.created_at}));this.state={...this.state,insights:e,lastUpdated:Date.now()},this.notify()}reset(){this.state={...e,lastUpdated:Date.now()},this.notify()}pushExplainability(t){let e=[{id:Math.random().toString(36).substring(7),timestamp:t.timestamp?new Date(t.timestamp).getTime():Date.now(),source:t.source||"unknown",reasonCode:t.reason_code||"unknown",summary:t.summary||""},...this.state.explanations].slice(0,10);this.state={...this.state,explanations:e,lastUpdated:Date.now()},this.notify()}}let i=new s;t.s(["default",0,i])},58714,t=>{t.v(t=>Promise.resolve().then(()=>t(27234)))}]);