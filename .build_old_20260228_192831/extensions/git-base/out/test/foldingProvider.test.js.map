{"version":3,"file":"foldingProvider.test.js","sourceRoot":"","sources":["../../src/test/foldingProvider.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nimport 'mocha';\r\nimport * as assert from 'assert';\r\nimport * as vscode from 'vscode';\r\nimport { GitCommitFoldingProvider } from '../foldingProvider';\r\n\r\nsuite('GitCommitFoldingProvider', () => {\r\n\r\n\tfunction createMockDocument(content: string): vscode.TextDocument {\r\n\t\tconst lines = content.split('\\n');\r\n\t\treturn {\r\n\t\t\tlineCount: lines.length,\r\n\t\t\tlineAt: (index: number) => ({\r\n\t\t\t\ttext: lines[index] || '',\r\n\t\t\t\tlineNumber: index\r\n\t\t\t}),\r\n\t\t} as vscode.TextDocument;\r\n\t}\r\n\r\n\tconst mockContext: vscode.FoldingContext = {} as vscode.FoldingContext;\r\n\tconst mockToken: vscode.CancellationToken = { isCancellationRequested: false } as vscode.CancellationToken;\r\n\r\n\ttest('empty document returns no folding ranges', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst doc = createMockDocument('');\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken);\r\n\r\n\t\tassert.strictEqual(Array.isArray(ranges) ? ranges.length : 0, 0);\r\n\t});\r\n\r\n\ttest('single line document returns no folding ranges', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst doc = createMockDocument('commit message');\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken);\r\n\r\n\t\tassert.strictEqual(Array.isArray(ranges) ? ranges.length : 0, 0);\r\n\t});\r\n\r\n\ttest('single comment line returns no folding ranges', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst doc = createMockDocument('# Comment');\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken);\r\n\r\n\t\tassert.strictEqual(Array.isArray(ranges) ? ranges.length : 0, 0);\r\n\t});\r\n\r\n\ttest('two comment lines create one folding range', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = '# Comment 1\\n# Comment 2';\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 1);\r\n\t\tassert.strictEqual(ranges[0].start, 0);\r\n\t\tassert.strictEqual(ranges[0].end, 1);\r\n\t\tassert.strictEqual(ranges[0].kind, vscode.FoldingRangeKind.Comment);\r\n\t});\r\n\r\n\ttest('multiple comment lines create one folding range', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = '# Comment 1\\n# Comment 2\\n# Comment 3\\n# Comment 4';\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 1);\r\n\t\tassert.strictEqual(ranges[0].start, 0);\r\n\t\tassert.strictEqual(ranges[0].end, 3);\r\n\t\tassert.strictEqual(ranges[0].kind, vscode.FoldingRangeKind.Comment);\r\n\t});\r\n\r\n\ttest('comment block followed by content', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = '# Comment 1\\n# Comment 2\\nCommit message';\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 1);\r\n\t\tassert.strictEqual(ranges[0].start, 0);\r\n\t\tassert.strictEqual(ranges[0].end, 1);\r\n\t\tassert.strictEqual(ranges[0].kind, vscode.FoldingRangeKind.Comment);\r\n\t});\r\n\r\n\ttest('comment block at end of document', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = 'Commit message\\n\\n# Comment 1\\n# Comment 2';\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 1);\r\n\t\tassert.strictEqual(ranges[0].start, 2);\r\n\t\tassert.strictEqual(ranges[0].end, 3);\r\n\t\tassert.strictEqual(ranges[0].kind, vscode.FoldingRangeKind.Comment);\r\n\t});\r\n\r\n\ttest('multiple separated comment blocks', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = '# Comment 1\\n# Comment 2\\n\\nCommit message\\n\\n# Comment 3\\n# Comment 4';\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 2);\r\n\t\tassert.strictEqual(ranges[0].start, 0);\r\n\t\tassert.strictEqual(ranges[0].end, 1);\r\n\t\tassert.strictEqual(ranges[0].kind, vscode.FoldingRangeKind.Comment);\r\n\t\tassert.strictEqual(ranges[1].start, 5);\r\n\t\tassert.strictEqual(ranges[1].end, 6);\r\n\t\tassert.strictEqual(ranges[1].kind, vscode.FoldingRangeKind.Comment);\r\n\t});\r\n\r\n\ttest('single diff line returns no folding ranges', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst doc = createMockDocument('diff --git a/file.txt b/file.txt');\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken);\r\n\r\n\t\tassert.strictEqual(Array.isArray(ranges) ? ranges.length : 0, 0);\r\n\t});\r\n\r\n\ttest('diff block with content creates folding range', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = 'diff --git a/file.txt b/file.txt\\nindex 1234..5678\\n--- a/file.txt\\n+++ b/file.txt';\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 1);\r\n\t\tassert.strictEqual(ranges[0].start, 0);\r\n\t\tassert.strictEqual(ranges[0].end, 3);\r\n\t\tassert.strictEqual(ranges[0].kind, undefined); // Diff blocks don't have a specific kind\r\n\t});\r\n\r\n\ttest('multiple diff blocks', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = [\r\n\t\t\t'diff --git a/file1.txt b/file1.txt',\r\n\t\t\t'--- a/file1.txt',\r\n\t\t\t'+++ b/file1.txt',\r\n\t\t\t'diff --git a/file2.txt b/file2.txt',\r\n\t\t\t'--- a/file2.txt',\r\n\t\t\t'+++ b/file2.txt'\r\n\t\t].join('\\n');\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 2);\r\n\t\tassert.strictEqual(ranges[0].start, 0);\r\n\t\tassert.strictEqual(ranges[0].end, 2);\r\n\t\tassert.strictEqual(ranges[1].start, 3);\r\n\t\tassert.strictEqual(ranges[1].end, 5);\r\n\t});\r\n\r\n\ttest('diff block at end of document', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = [\r\n\t\t\t'Commit message',\r\n\t\t\t'',\r\n\t\t\t'diff --git a/file.txt b/file.txt',\r\n\t\t\t'--- a/file.txt',\r\n\t\t\t'+++ b/file.txt'\r\n\t\t].join('\\n');\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 1);\r\n\t\tassert.strictEqual(ranges[0].start, 2);\r\n\t\tassert.strictEqual(ranges[0].end, 4);\r\n\t});\r\n\r\n\ttest('realistic git commit message with comments and verbose diff', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = [\r\n\t\t\t'Add folding support for git commit messages',\r\n\t\t\t'',\r\n\t\t\t'# Please enter the commit message for your changes. Lines starting',\r\n\t\t\t'# with \\'#\\' will be ignored, and an empty message aborts the commit.',\r\n\t\t\t'#',\r\n\t\t\t'# On branch main',\r\n\t\t\t'# Changes to be committed:',\r\n\t\t\t'#\\tmodified:   extension.ts',\r\n\t\t\t'#\\tnew file:   foldingProvider.ts',\r\n\t\t\t'#',\r\n\t\t\t'# ------------------------ >8 ------------------------',\r\n\t\t\t'# Do not modify or remove the line above.',\r\n\t\t\t'# Everything below it will be ignored.',\r\n\t\t\t'diff --git a/extensions/git-base/src/extension.ts b/extensions/git-base/src/extension.ts',\r\n\t\t\t'index 17ffb89..453d8f7 100644',\r\n\t\t\t'--- a/extensions/git-base/src/extension.ts',\r\n\t\t\t'+++ b/extensions/git-base/src/extension.ts',\r\n\t\t\t'@@ -3,14 +3,20 @@',\r\n\t\t\t' *  Licensed under the MIT License.',\r\n\t\t\t'-import { ExtensionContext } from \\'vscode\\';',\r\n\t\t\t'+import { ExtensionContext, languages } from \\'vscode\\';',\r\n\t\t\t'diff --git a/extensions/git-base/src/foldingProvider.ts b/extensions/git-base/src/foldingProvider.ts',\r\n\t\t\t'new file mode 100644',\r\n\t\t\t'index 0000000..2c4a9c3',\r\n\t\t\t'--- /dev/null',\r\n\t\t\t'+++ b/extensions/git-base/src/foldingProvider.ts'\r\n\t\t].join('\\n');\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\t// Should have one comment block and two diff blocks\r\n\t\tassert.strictEqual(ranges.length, 3);\r\n\r\n\t\t// Comment block (lines 2-12)\r\n\t\tassert.strictEqual(ranges[0].start, 2);\r\n\t\tassert.strictEqual(ranges[0].end, 12);\r\n\t\tassert.strictEqual(ranges[0].kind, vscode.FoldingRangeKind.Comment);\r\n\r\n\t\t// First diff block (lines 13-20)\r\n\t\tassert.strictEqual(ranges[1].start, 13);\r\n\t\tassert.strictEqual(ranges[1].end, 20);\r\n\t\tassert.strictEqual(ranges[1].kind, undefined);\r\n\r\n\t\t// Second diff block (lines 21-25)\r\n\t\tassert.strictEqual(ranges[2].start, 21);\r\n\t\tassert.strictEqual(ranges[2].end, 25);\r\n\t\tassert.strictEqual(ranges[2].kind, undefined);\r\n\t});\r\n\r\n\ttest('mixed comment and diff content', () => {\r\n\t\tconst provider = new GitCommitFoldingProvider();\r\n\t\tconst content = [\r\n\t\t\t'Fix bug in parser',\r\n\t\t\t'',\r\n\t\t\t'# Comment 1',\r\n\t\t\t'# Comment 2',\r\n\t\t\t'',\r\n\t\t\t'diff --git a/file.txt b/file.txt',\r\n\t\t\t'--- a/file.txt',\r\n\t\t\t'+++ b/file.txt',\r\n\t\t\t'',\r\n\t\t\t'# Comment 3',\r\n\t\t\t'# Comment 4'\r\n\t\t].join('\\n');\r\n\t\tconst doc = createMockDocument(content);\r\n\t\tconst ranges = provider.provideFoldingRanges(doc, mockContext, mockToken) as vscode.FoldingRange[];\r\n\r\n\t\tassert.strictEqual(ranges.length, 3);\r\n\r\n\t\t// First comment block\r\n\t\tassert.strictEqual(ranges[0].start, 2);\r\n\t\tassert.strictEqual(ranges[0].end, 3);\r\n\t\tassert.strictEqual(ranges[0].kind, vscode.FoldingRangeKind.Comment);\r\n\r\n\t\t// Diff block\r\n\t\tassert.strictEqual(ranges[1].start, 5);\r\n\t\tassert.strictEqual(ranges[1].end, 8);\r\n\t\tassert.strictEqual(ranges[1].kind, undefined);\r\n\r\n\t\t// Second comment block\r\n\t\tassert.strictEqual(ranges[2].start, 9);\r\n\t\tassert.strictEqual(ranges[2].end, 10);\r\n\t\tassert.strictEqual(ranges[2].kind, vscode.FoldingRangeKind.Comment);\r\n\t});\r\n});\r\n"]}